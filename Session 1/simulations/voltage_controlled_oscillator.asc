Version 4
SHEET 1 2628 1028
WIRE 2096 -192 1984 -192
WIRE 2208 -192 2096 -192
WIRE 1984 -160 1984 -192
WIRE 2208 -160 2208 -192
WIRE 1984 -48 1984 -80
WIRE 2064 -48 1984 -48
WIRE 2208 -48 2208 -80
WIRE 2208 -48 2144 -48
WIRE 2368 -48 2208 -48
WIRE 1776 0 1632 0
WIRE 1984 0 1984 -48
WIRE 2208 0 2208 -48
WIRE 2368 0 2368 -48
WIRE 2496 0 2464 0
WIRE 2624 0 2576 0
WIRE 144 80 112 80
WIRE 1696 80 1696 64
WIRE -384 96 -384 64
WIRE 672 96 624 96
WIRE 768 96 736 96
WIRE 1632 96 1632 0
WIRE 1664 96 1632 96
WIRE 144 112 144 80
WIRE 1776 112 1776 0
WIRE 1776 112 1728 112
WIRE 1264 128 912 128
WIRE 1664 128 1264 128
WIRE 1776 128 1776 112
WIRE 1856 128 1776 128
WIRE 1984 128 1984 64
WIRE 1984 128 1936 128
WIRE 2064 128 1984 128
WIRE 2208 128 2208 64
WIRE 2208 128 2144 128
WIRE 2304 128 2208 128
WIRE 2528 128 2528 112
WIRE 2368 144 2368 64
WIRE 2464 144 2464 0
WIRE 2464 144 2368 144
WIRE 2496 144 2464 144
WIRE 1696 160 1696 144
WIRE 2304 160 2304 128
WIRE 2624 160 2624 0
WIRE 2624 160 2560 160
WIRE 2496 176 2464 176
WIRE -384 192 -384 176
WIRE -320 192 -384 192
WIRE 1984 192 1984 128
WIRE 2208 192 2208 128
WIRE 2368 192 2368 144
WIRE -384 208 -384 192
WIRE 2528 208 2528 192
WIRE -320 224 -320 192
WIRE 688 224 688 208
WIRE 48 240 16 240
WIRE 144 240 144 192
WIRE 144 240 112 240
WIRE 192 240 144 240
WIRE 384 240 272 240
WIRE 480 240 384 240
WIRE 624 240 624 96
WIRE 624 240 480 240
WIRE 656 240 624 240
WIRE 1024 240 1024 224
WIRE 768 256 768 96
WIRE 768 256 720 256
WIRE 912 256 912 128
WIRE 912 256 768 256
WIRE 992 256 912 256
WIRE 1328 256 1328 240
WIRE 656 272 608 272
WIRE 1104 272 1056 272
WIRE 1264 272 1264 128
WIRE 1296 272 1264 272
WIRE 2464 272 2464 176
WIRE 992 288 960 288
WIRE 1456 288 1360 288
WIRE 688 304 688 288
WIRE 1296 304 1248 304
WIRE -384 320 -384 288
WIRE 144 320 144 240
WIRE 192 320 144 320
WIRE 608 320 608 272
WIRE 608 320 272 320
WIRE 1024 320 1024 304
WIRE 1984 320 1984 256
WIRE 2064 320 1984 320
WIRE 2208 320 2208 256
WIRE 2208 320 2144 320
WIRE 2368 320 2368 256
WIRE 2368 320 2208 320
WIRE 384 336 384 240
WIRE 480 336 480 240
WIRE 1328 336 1328 320
WIRE 1984 368 1984 320
WIRE 2208 368 2208 320
WIRE 608 384 608 320
WIRE 816 432 784 432
WIRE 960 432 960 288
WIRE 960 432 896 432
WIRE 992 432 960 432
WIRE 1104 432 1104 272
WIRE 1104 432 1072 432
WIRE 384 448 384 416
WIRE 480 448 480 416
WIRE 480 448 384 448
WIRE 784 464 784 432
WIRE 480 480 480 448
WIRE 1984 480 1984 448
WIRE 2096 480 1984 480
WIRE 2208 480 2208 448
WIRE 2208 480 2096 480
WIRE 656 528 544 528
WIRE 816 528 656 528
WIRE 1104 528 1104 432
WIRE 1104 528 896 528
WIRE 656 544 656 528
WIRE -176 640 -208 640
WIRE -208 672 -208 640
WIRE 480 672 480 576
WIRE 608 672 608 464
WIRE 608 672 480 672
WIRE 656 672 656 624
WIRE 656 672 608 672
WIRE 480 688 480 672
WIRE -208 784 -208 752
WIRE -176 864 -208 864
WIRE 144 864 112 864
WIRE -208 912 -208 864
WIRE 112 912 112 864
WIRE -208 1008 -208 992
WIRE 112 1008 112 992
FLAG -384 64 VCC
FLAG -384 320 VEE
FLAG -320 224 0
FLAG 688 208 VCC
FLAG 688 304 VEE
FLAG 480 688 VEE
FLAG 112 80 base_freq_set
IOPIN 112 80 In
FLAG 16 240 modulation
IOPIN 16 240 In
FLAG 1024 224 VCC
FLAG 1024 320 VEE
FLAG 784 464 0
FLAG -176 640 modulation
FLAG -208 784 0
FLAG -176 864 base_freq_set
FLAG -208 1008 0
FLAG 1696 64 VCC
FLAG 1696 160 VEE
FLAG 1328 240 VCC
FLAG 1328 336 VEE
FLAG 144 864 PWM_ctrl
FLAG 112 1008 0
FLAG 1248 304 PWM_ctrl
IOPIN 1248 304 In
FLAG 2304 160 0
FLAG 2528 112 VCC
FLAG 2528 208 VEE
FLAG 2464 272 0
FLAG 2096 -192 VCC
FLAG 2096 480 VEE
SYMBOL voltage -384 80 R0
SYMATTR InstName V1
SYMATTR Value 9
SYMBOL voltage -384 192 R0
SYMATTR InstName V2
SYMATTR Value 9
SYMBOL OpAmps\\UniversalOpAmp2 688 256 R0
SYMATTR InstName U1
SYMBOL cap 112 224 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 10µ
SYMBOL res 288 224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 100k
SYMBOL res 288 304 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 100k
SYMBOL cap 736 80 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 10n
SYMBOL res 400 432 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R3
SYMATTR Value 100k
SYMBOL res 496 432 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R4
SYMATTR Value 100k
SYMBOL npn 544 480 M0
SYMATTR InstName Q1
SYMATTR Value 2N3904
SYMBOL res 624 480 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R5
SYMATTR Value 100k
SYMBOL res 128 96 R0
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL res 640 528 R0
SYMATTR InstName R7
SYMATTR Value 1k
SYMBOL OpAmps\\UniversalOpAmp2 1024 272 R0
SYMATTR InstName U2
SYMBOL res 912 512 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 5k
SYMBOL res 912 416 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 5k
SYMBOL res 1088 416 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 5k
SYMBOL voltage -208 656 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value PULSE(-5 5 0 20m 20m 10m 60m)
SYMBOL voltage -208 896 R0
SYMATTR InstName V4
SYMATTR Value 0
SYMBOL OpAmps\\UniversalOpAmp2 1696 112 R0
SYMATTR InstName U3
SYMBOL OpAmps\\UniversalOpAmp2 1328 288 R0
SYMATTR InstName U4
SYMBOL voltage 112 896 R0
SYMATTR InstName V5
SYMATTR Value -2
SYMBOL res 1952 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 1k
SYMBOL res 2160 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 200
SYMBOL diode 1968 0 R0
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL diode 1968 192 R0
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL diode 2192 0 R0
SYMATTR InstName D3
SYMATTR Value 1N4148
SYMBOL diode 2192 192 R0
SYMATTR InstName D4
SYMATTR Value 1N4148
SYMBOL res 2160 -64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 820
SYMBOL res 2160 304 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 820
SYMBOL res 1968 -176 R0
SYMATTR InstName R15
SYMATTR Value 24k
SYMBOL res 2192 -176 R0
SYMATTR InstName R16
SYMATTR Value 24k
SYMBOL res 1968 352 R0
SYMATTR InstName R17
SYMATTR Value 24k
SYMBOL res 2192 352 R0
SYMATTR InstName R18
SYMATTR Value 24k
SYMBOL OpAmps\\UniversalOpAmp2 2528 160 R0
SYMATTR InstName U5
SYMBOL diode 2352 0 R0
SYMATTR InstName D5
SYMATTR Value 1N4148
SYMBOL diode 2352 192 R0
SYMATTR InstName D6
SYMATTR Value 1N4148
SYMBOL res 2592 -16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R19
SYMATTR Value 10k
TEXT -448 472 Left 2 !.tran 200m
